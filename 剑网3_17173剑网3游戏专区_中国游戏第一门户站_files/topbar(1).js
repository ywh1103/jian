/*! mingjihuang@cyou-inc.com v2.5.0  2016-08-22 */
!function(a){"use strict";var b=function(){for(var a=navigator.userAgent,b=["Android","iPhone","SymbianOS","Windows Phone","iPod","iPad"],c=!1,d=0;d<b.length;d++)if(a.indexOf(b[d])>-1){c=!0;break}return c}();if(!(b&&$('meta[name="viewport"]')[0]&&$(document).width()-$(window).width()<50)){var c="http://www.17173.com/2014/topbar/configs.js",d=Object.prototype.toString,e={ARRAY:"[object Array]",NUM:"[object Number]",OBJECT:"[object Object]",STRING:"[object String]",FUNCTION:"[object Function]"},f=document.createElement("div"),g=(document.documentElement,window.dispatchEvent),h=!!window.ActiveXObject&&!window.XMLHttpRequest,i={isArray:function(a){return d.call(a)===e.ARRAY},isObject:function(a){return d.call(a)===e.OBJECT},isFunction:function(a){return d.call(a)===e.FUNCTION},extend:function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||this.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(this.isObject(d)||(e=this.isArray(d)))?(e?(e=!1,f=c&&this.isArray(c)?c:[]):f=c&&this.isObject(c)?c:{},g[b]=this.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},html:function(a){return f.innerHTML=a,f.removeChild(f.firstChild)},on:function(a,b,c,d){if(a){var e=g?c:function(b){return c.call(a,b)};return g?a.addEventListener(b,e,!!d):a.attachEvent("on"+b,e),e}},loadScript:function(a,b){var c=document.createElement("script");c.type="text/javascript",c.src=a,c.addEventListener?c.addEventListener("load",b,!1):c.attachEvent&&c.attachEvent("onreadystatechange",function(){var a=window.event.srcElement;"loaded"==a.readyState&&b()}),document.getElementsByTagName("head")[0].appendChild(c)},objToQueryStr:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")},jsonpGet:function(a,b,c){if(c){var d="topbarjsonp"+1*new Date;window[d]=c,b.callback=d}a=a+"?"+this.objToQueryStr(b);var e=document.createElement("script");e.src=a,document.getElementsByTagName("head")[0].appendChild(e)},loadStyle:function(a){var b="",c=document.getElementsByTagName("head").item(0);b=document.createElement("link"),b.rel="stylesheet",b.type="text/css",c.appendChild(b),b.href=a},hide:function(a){a.style.display="none"},show:function(a){a.style.display="block"},getScrollTop:function(){return document.documentElement.scrollTop||document.body.scrollTop}},j={init:function(){var b=this;this.css(),i.loadScript(c,function(){window.topbarDefaultConfig&&(b.option=i.extend({},window.topbarDefaultConfig,window.topbarConfig),b.render(),b.style=1,b.toggleStyle(b.option.style),b.option.autoToggleStyle&&(i.on(window,"scroll",function(){b.autoToggleStyle()},100),b.autoToggleStyle()),a.Topbar.onRender&&a.Topbar.onRender.call(a.Topbar),b.isRendered=!0)})},render:function(){var a,c=this;h||!this.option.autoSetBodyPadding||b||(a=document.body.style.paddingTop,a=a?parseInt(a):0,a=a>=44?a:44,document.body.style.paddingTop=a+"px"),document.getElementById("js-global-topnav")&&h&&(document.getElementById("js-global-topnav").style.display="none"),this.renderWrap(),h&&(this.wrapEl.style.position="relative"),document.body.insertBefore(this.wrapEl,document.body.firstChild),this.initSiteNavs(),this.initGames(),window.Passport?this.initPprt():i.loadScript("http://ue8.17173.itc.cn/a/lib/passport-2.0/passport.js",function(){c.initPprt.call(c)})},generalLogEvent:function(a){return a?" onClick=\"Topbar.sendLog.call(this,'"+a+"')\" ":""},renderWrap:function(){var a=[],c=this.option;a.push('<div class="g-topbar" id="ue-topbar" style="'+(b?"position:relative;":"")+'">'),a.push('	<div class="g-topbar-in">'),a.push('		<div class="topbar-c1">'),a.push('			<span class="topbar-go-index"><a href="http://www.17173.com" '+this.generalLogEvent(c.homeLogCode)+' target="_blank" class="topbar-link" id="topbar-backhome-link">17173\u9996\u9875</a></span>'),a.push('			<div class="topbar-nav" id="topbar-nav">'),a.push('				<a href="javascript:;" class="topbar-link" id="topbar-link"><i class="topbar-ico-set"></i>\u7f51\u7ad9\u5bfc\u822a</a>'),a.push("			</div>"),a.push("		</div>"),a.push('		<div class="topbar-c2"'+(c.market.link?"":' style="visibility:hidden;"')+'><a href="'+c.market.link+'" target="_blank" class="topbar-tg"'+(c.market.link?this.generalLogEvent(c.market.logCode):"")+' title="'+(c.market.title||"")+'"><img src="'+c.market.img+'" width="164" height="44" /></a></div>'),a.push('		<div class="topbar-c3">');for(var d=0;d<c.coreProducts.length;d++)a.push('    <span class="topbar-product">'),a.push('        <a href="'+c.coreProducts[d].link+'" target="_blank"'+this.generalLogEvent(c.coreProducts[d].logCode)+' class="topbar-link">'+c.coreProducts[d].text),c.coreProducts[d].hot&&a.push('            <i class="topbar-ico-hot"></i>'),a.push("        </a>"),a.push("    </span>");a.push("		</div>"),a.push('		<div class="topbar-c4">'),a.push('			<div class="topbar-hot" id="topbar-hotgame">'),a.push('				<a href="javascript:;" class="topbar-link" id="topbar-games-link"><i class="topbar-ico-game"></i>'+c.games.text+"</a>"),a.push("			</div>"),a.push("		</div>"),a.push('		<div class="topbar-user" id="topbar-pprt">'),a.push("		</div>"),a.push("	</div>"),a.push("</div>"),this.wrapEl=i.html(a.join(""))},renderSiteNavs:function(){var a=[],b=this.option.siteNavs;a.push('<div class="topbar-drop">');for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if(a.push('					<div class="topbar-nav-item">'),a.push('						<div class="topbar-nav-main"><a href="'+d.link+'" target="_blank"'+this.generalLogEvent(d.logCode)+">"+c+"</a></div>"),d.child.length){a.push('						<div class="topbar-nav-sub">');for(var e=0;e<d.child.length;e++)a.push('							<a href="'+d.child[e].link+'" target="_blank"'+this.generalLogEvent(d.child[e].logCode)+">"+d.child[e].text+"</a>");a.push("						</div>")}a.push("					</div>")}a.push("</div>"),this.siteNavEl=i.html(a.join(""))},initSiteNavs:function(){var a=this;this.navWrap=document.getElementById("topbar-nav"),this.renderSiteNavs(),this.navWrap.appendChild(this.siteNavEl);var b=null;i.on(this.navWrap,"mouseover",function(){clearTimeout(b),b=setTimeout(function(){a.navWrap.className="topbar-nav topbar-drop-show"},100)}),i.on(this.navWrap,"mouseout",function(){clearTimeout(b),b=setTimeout(function(){a.navWrap.className="topbar-nav"},100)})},renderGames:function(){var a=[],b=this.option.games.data;a.push('<div class="topbar-drop">'),a.push('					<ul class="topbar-hot-list">');for(var c=0;c<b.length;c++)a.push('						<li class="topbar-hotlist-item">'),a.push('							<a href="'+b[c].link+'" target="_blank"'+this.generalLogEvent(b[c].logCode)+' class="topbar-hotlist-con">'),a.push('								<span class="topbar-hotlis-avatar"><img src="'+b[c].img+'" alt="" width="60" height="60" /></span>'),a.push('								<span class="topbar-hotlist-txt">'+b[c].text+"</span>"),a.push("							</a>"),a.push("						</li>");a.push("					</ul>"),a.push("</div>"),this.gamesEl=i.html(a.join(""))},initGames:function(){var a=this;this.gamesWrap=document.getElementById("topbar-hotgame"),this.renderGames(),this.gamesWrap.appendChild(this.gamesEl);var b=null;i.on(this.gamesWrap,"mouseover",function(){clearTimeout(b),b=setTimeout(function(){a.gamesWrap.className="topbar-hot topbar-drop-show"},100)}),i.on(this.gamesWrap,"mouseout",function(){clearTimeout(b),b=setTimeout(function(){a.gamesWrap.className="topbar-hot"},100)})},getReadHistory:function(){},renderPprtLogout:function(){var a=[],b=this;a.push('<div class="topbar-user-loginout">'),a.push('<div class="topbar-bt-login" id="topbar-inner-logout-container">'),a.push('	<a href="#" id="topbar-pprt-login" class="topbar-link"><span class="topbar-user-photo" id="topbar-pprt-logoutportrait"></span>\u767b\u5f55</a>'),a.push('<span class="topbar-bt-sign"><a href="'+Passport.URL_REGISTER+'" target="_blank" class="topbar-link">\u6ce8\u518c</a></span>'),a.push("</div>"),this.pprtEl=i.html(a.join(""));var c=document.getElementById("topbar-pprt");c.innerHTML="",c.appendChild(this.pprtEl),i.on(document.getElementById("topbar-pprt-login"),"click",function(){var a=b.option.passportOption||{};return Passport.Dialog.show(a),!1}),i.on(document.getElementById("topbar-pprt-login2"),"click",function(){var a=b.option.passportOption||{};return Passport.Dialog.show(a),!1}),this.getUid(function(a){if(a){var b='<img src="'+Passport.getUserPortrait(a.toString())+'" alt="" width="25" height="25"/>';document.getElementById("topbar-pprt-logoutportrait").appendChild(i.html(b))}})},renderPprtLogin:function(){var a=[],c=this;a.push('<div class="topbar-user-loginin" id="topbar-user-loggedin" style="display:block">'),a.push('	<div class="topbar-user-name" id="topbar-inner-container"> <a href="javascript:;" class="topbar-link"><span class="topbar-user-photo"><img src="http://ue3.17173cdn.com/a/lib/topbar/2014/img/photo.jpg" id="topbar-pprt-portrait" alt="" width="25" height="25"></span><span id="topbar-pprt-username">'+Passport.data("nickname")+"</span></a>"),a.push('		<div class="topbar-drop" id="topbar-pprt-card">'),a.push('			<div class="topbar-usinfo">'),a.push('				<div class="topbar-usdetail">'),a.push('					<div class="topbar-usdetail-c1">'),a.push('						<a href="https://passport.17173.com/main" target="_blank" class="topbar-usdetail-photo">'),a.push('							<img src="http://ue3.17173cdn.com/a/lib/topbar/2014/img/photo.jpg" id="topbar-pprt-portrait2" alt="" width="70" height="70">'),a.push('							<span class="topbar-usdetail-tip">\u66f4\u6362\u5934\u50cf</span>'),a.push("						</a>"),a.push("					</div>"),a.push('					<div class="topbar-usdetail-c2">'),a.push('						<div class="topbar-usdetail-name"><span '+(b?'style="height:19px"':"")+">"+Passport.data("nickname")+'</span><a href="https://passport.17173.com" target="_blank" class="topbar-bt-modify"><i class="topbar-ico-modify"></i></a></div>'),a.push('						<div class="topbar-usdetail-id" title="'+Passport.data("username")+'">'+Passport.data("username")+"</div>"),a.push('						<a href="http://my.17173.com/notification.do" target="_blank" class="topbar-usdetail-mess"><i class="topbar-ico-mess"></i><span id="topbar-pprt-message">(1)</span></a>'),a.push("					</div>"),a.push("				</div>"),a.push('				<div class="topbar-usother">'),a.push('					<div class="topbar-usother-bd">'),a.push('						<div class="topbar-ustab-pn" id="topbar-quickguide-container"></div>'),a.push("					</div>"),a.push("				</div>"),a.push("			</div>"),a.push('			<div class="topbar-usopera">'),a.push('				<a href="https://passport.17173.com/safe/mobile/index" target="_blank" class="topbar-usopera-set">\u8d26\u53f7\u8bbe\u7f6e</a>'),a.push('				<a href="javascript:;" id="topbar-pprt-logout" class="topbar-usopera-quit">\u5b89\u5168\u9000\u51fa</a>'),a.push("			</div>"),a.push("		</div>"),a.push("	</div>"),a.push("</div>"),this.pprtEl=i.html(a.join(""));var d=document.getElementById("topbar-pprt");d.innerHTML="",d.appendChild(this.pprtEl),i.on(document.getElementById("topbar-pprt-logout"),"click",function(a){Passport.logout(a)}),document.getElementById("topbar-pprt-portrait").src=Passport.getUserPortrait(Passport.data("uid")),document.getElementById("topbar-pprt-portrait2").src=Passport.getUserPortrait(Passport.data("uid"),1),this.generalQuickGuide(),this.getUid(function(a){c.getUnReadMessage(a,function(a){document.getElementById("topbar-pprt-message").innerHTML="("+a+")"})})},getUnReadMessage:function(a,b){i.jsonpGet("http://my.17173.com/snsapi",{apikey:"701a3d946a64638d51f0cf5dfcbf6b09",method:"Notification.unreadcount",ver:"alpha",uid:a},function(a){var c=0;a&&a.unReadCount&&(c=a.unReadCount),b(c)})},getUid:function(a){a(Passport.getLastUid())},clearReadLog:function(){},generalReadHistory:function(){},generalQuickGuide:function(){var a=[],b=this.option.quickGuide;a.push('<ul class="topbar-channel-list">');for(var c=0;c<b.length;c++)a.push('		<li class="topbar-channel-item">'),a.push('			<a href="'+b[c].link+'" target="_blank" class="topbar-channel-con">'),a.push('				<img src="'+b[c].img+'" alt="" width="36" height="40" class="topbar-channel-avatar"/>'),a.push('				<span class="topbar-channel-txt">'+b[c].text+"</span>"),a.push("			</a>"),a.push("		</li>");a.push("</ul>");var d=document.getElementById("topbar-quickguide-container");d.innerHTML="",d.appendChild(i.html(a.join("")))},_onLoginout:function(){this.renderPprtLogout()},_onLoggedin:function(){this.renderPprtLogin()},initPprt:function(){Passport.isLoggedIn()?this.renderPprtLogin():this.renderPprtLogout(),Passport.on(Passport.EVENTS.loginSuccess,function(){j._onLoggedin()}),Passport.on(Passport.EVENTS.logoutSuccess,function(){j._onLoginout()});var a=document.getElementById("topbar-pprt"),b=null;i.on(a,"mouseover",function(){var a=document.getElementById("topbar-inner-container");clearTimeout(b),a&&(b=setTimeout(function(){a.className=a.className.replace("topbar-drop-show","")+" topbar-drop-show"},100))}),i.on(a,"mouseout",function(){var a=document.getElementById("topbar-inner-container");a&&(clearTimeout(b),b=setTimeout(function(){a.className=a.className.replace("topbar-drop-show","")},100))})},css:function(){i.loadStyle("http://ue.17173cdn.com/a/lib/topbar/v2/css/style.css?201411141153")},autoToggleStyle:function(){var a=this,b=i.getScrollTop();if(b>a.option.scrollTopForStyleToggle&&1===a.style||b<a.option.scrollTopForStyleToggle&&2===a.style){var c=1===a.style?2:1;a.toggleStyle(c)}},toggleStyle:function(a){{var b=document.getElementById("topbar-backhome-link");document.getElementById("topbar-link")}this.style!=a&&(2==a?(this.wrapEl.className="g-topbar topbar-ex",b.innerHTML='<img alt="17173\u9996\u9875" width="105" height="35" src="http://ue1.17173cdn.com/a/lib/logo/normal-s.png"/>'):(this.wrapEl.className="g-topbar",b.innerHTML="17173\u9996\u9875"),this.style=a)}};j.init(),window.topbarUtil=i,window.topbar=j;var k=function(a){window._jc_ping=window._jc_ping||[],_jc_ping.push(["_trackBlockClick",a.ads,a.url])};a.Topbar={VERSION:"2.4.0",onRender:null,isRendered:function(){return j.isRendered},sendLog:function(a){if(a){a=a.split(",");for(var b=0;b<a.length;b++)k({url:this.href,ads:a[b]})}}}}}(window);